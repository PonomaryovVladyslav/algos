# –ó–∞–¥–∞—á–∞: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –≤ "—Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫" –ø–æ –ø–æ—Ä—è–¥–∫—É –æ–±—Ö–æ–¥–∞ –≤ –≥–ª—É–±–∏–Ω—É (preorder).
# –î–∞–Ω–æ: –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ —Å –∫–æ—Ä–Ω–µ–º `root`.
# –ù—É–∂–Ω–æ: –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–∫, —á—Ç–æ–±—ã –≤—Å–µ —É–∑–ª—ã –±—ã–ª–∏ —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ `right`, –∞ `left` –±—ã–ª `None`.

class TreeNode:
    """
    –ö–ª–∞—Å—Å —É–∑–ª–∞ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞.
    """
    def __init__(self, val: int = 0, left: "TreeNode" = None, right: "TreeNode" = None):
        self.val = val
        self.left = left
        self.right = right


def flatten(root: TreeNode) -> None:
    """
    –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –≤ "—Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫" –≤ –ø–æ—Ä—è–¥–∫–µ preorder (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –Ω–∞ –º–µ—Å—Ç–µ).

    :param root: TreeNode - –∫–æ—Ä–µ–Ω—å –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞.
    """

    curr: TreeNode | None = root

    while curr:
        if curr.left:
            # –ù–∞—Ö–æ–¥–∏–º –∫—Ä–∞–π–Ω–∏–π –ø—Ä–∞–≤—ã–π —É–∑–µ–ª –≤ –ª–µ–≤–æ–º –ø–æ–¥–¥–µ—Ä–µ–≤–µ
            predecessor: TreeNode = curr.left
            while predecessor.right:
                predecessor = predecessor.right

            # –ü–µ—Ä–µ–º–µ—â–∞–µ–º `right` –ø–æ–¥–¥–µ—Ä–µ–≤–æ
            predecessor.right = curr.right
            curr.right = curr.left
            curr.left = None  # –û–±–Ω—É–ª—è–µ–º `left`

        curr = curr.right  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –¥–∞–ª—å—à–µ


# üîπ –ò—Å—Ö–æ–¥–Ω–æ–µ –¥–µ—Ä–µ–≤–æ:
#     1
#    / \
#   2   5
#  / \   \
# 3   4   6
tree = TreeNode(1,
    TreeNode(2, TreeNode(3), TreeNode(4)),
    TreeNode(5, None, TreeNode(6))
)

flatten(tree)

# üîπ –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞
curr: TreeNode | None = tree
while curr:
    print(curr.val, end=" -> ")
    curr = curr.right
# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: 1 -> 2 -> 3 -> 4 -> 5 -> 6

"""
–ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:
- –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: O(n), —Ç–∞–∫ –∫–∞–∫ –º—ã –ø—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–º—É —É–∑–ª—É —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.
- –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: O(1), —Ç–∞–∫ –∫–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ (in-place).

üîπ –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Morris Traversal**, –∏–∑–±–µ–≥–∞—è —Ä–µ–∫—É—Ä—Å–∏–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏.
"""
